{"ast":null,"code":"var _jsxFileName = \"/home/bruna/Documentos/portfolio/projeto/trybetunes/src/pages/Search.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport Loading from '../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass Search extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      artist: '',\n      isSaveButtonDisabled: true,\n      loading: false,\n      albums: [],\n      searchedName: '',\n      clickButton: false,\n      error: false\n    };\n    this.onInputChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        value\n      } = target;\n      const minName = 1;\n      this.setState({\n        artist: value\n      }, () => {\n        if (value.length > minName) {\n          this.setState({\n            isSaveButtonDisabled: false\n          });\n        } else {\n          this.setState({\n            isSaveButtonDisabled: true\n          });\n        }\n      });\n    };\n    this.searchArtist = async () => {\n      const {\n        artist\n      } = this.state;\n      this.setState({\n        loading: true\n      });\n      const listAlbums = await searchAlbumsAPI(artist);\n      if (listAlbums.length === 0) {\n        this.setState({\n          loading: false,\n          clickButton: false,\n          error: true\n        });\n      } else {\n        this.setState({\n          searchedName: artist,\n          artist: '',\n          albums: listAlbums,\n          loading: false,\n          clickButton: true,\n          error: false\n        });\n      }\n    };\n  }\n  render() {\n    const {\n      loading,\n      artist,\n      isSaveButtonDisabled,\n      searchedName,\n      albums,\n      clickButton,\n      error\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-search\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          \"data-testid\": \"search-artist-input\",\n          onChange: this.onInputChange,\n          value: artist,\n          type: \"text\",\n          placeholder: \"NOME DO ARTISTA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          \"data-testid\": \"search-artist-button\",\n          disabled: isSaveButtonDisabled,\n          onClick: this.searchArtist,\n          children: \"Pesquisar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 23\n      }, this), error && /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \" Nenhum \\xE1lbum foi encontrado \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), clickButton && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Resultado de \\xE1lbuns de:\", ' ', searchedName, \",\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          children: albums.map(_ref2 => {\n            let {\n              artistId,\n              artistName,\n              collectionName,\n              artworkUrl100,\n              collectionId\n            } = _ref2;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: artworkUrl100,\n                alt: collectionName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: collectionName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: artistName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                \"data-testid\": `link-to-album-${collectionId}`,\n                to: `/album/${collectionId}`,\n                children: \"Saiba Mais\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this)]\n            }, artistId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Search;","map":{"version":3,"names":["React","Link","Header","searchAlbumsAPI","Loading","Search","Component","state","artist","isSaveButtonDisabled","loading","albums","searchedName","clickButton","error","onInputChange","target","value","minName","setState","length","searchArtist","listAlbums","render","map","artistId","artistName","collectionName","artworkUrl100","collectionId"],"sources":["/home/bruna/Documentos/portfolio/projeto/trybetunes/src/pages/Search.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport Loading from '../components/Loading';\n\nclass Search extends React.Component {\n  state = {\n    artist: '',\n    isSaveButtonDisabled: true,\n    loading: false,\n    albums: [],\n    searchedName: '',\n    clickButton: false,\n    error: false,\n  };\n\n  onInputChange = ({ target }) => {\n    const { value } = target;\n    const minName = 1;\n    this.setState({ artist: value }, () => {\n      if (value.length > minName) {\n        this.setState({\n          isSaveButtonDisabled: false,\n        });\n      } else {\n        this.setState({\n          isSaveButtonDisabled: true,\n        });\n      }\n    });\n  };\n\n  searchArtist = async () => {\n    const { artist } = this.state;\n    this.setState({ loading: true });\n    const listAlbums = await searchAlbumsAPI(artist);\n    if (listAlbums.length === 0) {\n      this.setState({\n        loading: false,\n        clickButton: false,\n        error: true,\n      });\n    } else {\n      this.setState({\n        searchedName: artist,\n        artist: '',\n        albums: listAlbums,\n        loading: false,\n        clickButton: true,\n        error: false,\n      });\n    }\n  };\n\n  render() {\n    const {\n      loading,\n      artist,\n      isSaveButtonDisabled,\n      searchedName,\n      albums,\n      clickButton,\n      error,\n    } = this.state;\n    return (\n      <div data-testid=\"page-search\">\n        <Header />\n        <form>\n          <input\n            data-testid=\"search-artist-input\"\n            onChange={ this.onInputChange }\n            value={ artist }\n            type=\"text\"\n            placeholder=\"NOME DO ARTISTA\"\n          />\n          <button\n            type=\"button\"\n            data-testid=\"search-artist-button\"\n            disabled={ isSaveButtonDisabled }\n            onClick={ this.searchArtist }\n          >\n            Pesquisar\n          </button>\n        </form>\n        {(loading) && <Loading />}\n        {(error) && (\n          <h2> Nenhum álbum foi encontrado </h2>\n        )}\n        {(clickButton) && (\n          <>\n            <h2>\n              Resultado de álbuns de:\n              {' '}\n              {searchedName}\n              ,\n            </h2>\n            <section>\n              {albums.map(({\n                artistId,\n                artistName,\n                collectionName,\n                artworkUrl100,\n                collectionId,\n              }) => (\n                <div key={ artistId }>\n                  <img src={ artworkUrl100 } alt={ collectionName } />\n                  <p>{collectionName}</p>\n                  <p>{artistName}</p>\n                  <Link\n                    data-testid={ `link-to-album-${collectionId}` }\n                    to={ `/album/${collectionId}` }\n                  >\n                    Saiba Mais\n                  </Link>\n                </div>\n              ))}\n            </section>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}